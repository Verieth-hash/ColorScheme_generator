<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ü–≤–µ—Ç–æ–≤—ã—Ö –ø–∞–ª–∏—Ç—Ä</title>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --light: #ecf0f1;
      --dark: #34495e;
      --success: #27ae60;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      color: var(--light);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      padding: 30px 0;
      margin-bottom: 30px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }

    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    @media (max-width: 768px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    .control-panel {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .section-title {
      font-size: 1.4rem;
      margin-bottom: 20px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-title::before {
      content: "üé®";
    }

    .color-picker {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 25px;
    }

    #base-color {
      width: 80px;
      height: 80px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .color-value {
      font-size: 1.2rem;
      font-weight: bold;
      background: rgba(0,0,0,0.3);
      padding: 8px 15px;
      border-radius: 8px;
    }

    .generation-controls {
      margin-bottom: 25px;
    }

    .algorithm-selector {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: none;
      background: rgba(255,255,255,0.9);
      margin-bottom: 15px;
      font-size: 1rem;
    }

    .generate-btn {
      width: 100%;
      padding: 15px;
      background: var(--success);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
    }

    .generate-btn:hover {
      background: #219653;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
    }

    .palette-display {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .palette-colors {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .color-item {
      flex: 1;
      min-width: 100px;
      height: 120px;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .color-item:hover {
      transform: translateY(-5px);
    }

    .color-hex {
      background: rgba(0,0,0,0.7);
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.9rem;
      font-weight: bold;
      text-align: center;
    }

    .preview-section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .preview-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .preview-content {
        grid-template-columns: 1fr;
      }
    }

    .preview-card {
      background: rgba(255,255,255,0.95);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .preview-title {
      color: var(--dark);
      margin-bottom: 15px;
      font-size: 1.2rem;
    }

    .button-preview {
      padding: 12px 25px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      margin: 5px;
      transition: all 0.3s ease;
    }

    .text-preview {
      line-height: 1.6;
      color: var(--dark);
    }

    .export-section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .export-options {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .export-btn {
      padding: 12px 20px;
      background: var(--secondary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .export-btn:hover {
      background: #2980b9;
      transform: translateY(-2px);
    }

    textarea {
      width: 100%;
      height: 150px;
      padding: 15px;
      border-radius: 8px;
      border: none;
      background: rgba(255,255,255,0.95);
      font-family: monospace;
      font-size: 0.9rem;
      resize: vertical;
    }

    .save-section {
      text-align: center;
      margin-top: 30px;
    }

    .save-btn {
      padding: 15px 30px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(44, 62, 80, 0.3);
    }

    .save-btn:hover {
      background: #1a252f;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(44, 62, 80, 0.4);
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      background: var(--success);
      color: white;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transform: translateX(200%);
      transition: transform 0.3s ease;
      z-index: 1000;
    }

    .notification.show {
      transform: translateX(0);
    }

    .algorithm-info {
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      font-size: 0.9rem;
    }

    .algorithm-info h3 {
      margin-bottom: 10px;
      color: #f1c40f;
    }

    .algorithm-info p {
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .math-formula {
      font-family: monospace;
      background: rgba(0,0,0,0.3);
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      overflow-x: auto;
    }
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>üé® –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ü–≤–µ—Ç–æ–≤—ã—Ö –ø–∞–ª–∏—Ç—Ä</h1>
    <p class="subtitle">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤—ã—Ö —Å—Ö–µ–º</p>
  </header>

  <div class="main-content">
    <div class="control-panel">
      <h2 class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–ª–∏—Ç—Ä—ã</h2>

      <div class="color-picker">
        <input type="color" id="base-color" value="#3498db">
        <div class="color-value" id="color-value">#3498db</div>
      </div>

      <div class="generation-controls">
        <select class="algorithm-selector" id="algorithm">
          <option value="analogous">–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ —Ü–≤–µ—Ç–∞</option>
          <option value="complementary">–ö–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–µ —Ü–≤–µ—Ç–∞</option>
          <option value="triadic">–¢—Ä–∏–∞–¥–Ω—ã–µ —Ü–≤–µ—Ç–∞</option>
          <option value="tetradic">–¢–µ—Ç—Ä–∞–¥–Ω—ã–µ —Ü–≤–µ—Ç–∞</option>
          <option value="monochromatic">–ú–æ–Ω–æ—Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞</option>
        </select>

        <button class="generate-btn" id="generate">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ª–∏—Ç—Ä—É</button>
      </div>

      <div class="algorithm-info">
        <h3>–ê–ª–≥–æ—Ä–∏—Ç–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h3>
        <p><strong>–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ:</strong> –¶–≤–µ—Ç–∞ —Ä—è–¥–æ–º –Ω–∞ —Ü–≤–µ—Ç–æ–≤–æ–º –∫—Ä—É–≥–µ (¬±30¬∞)</p>
        <p><strong>–ö–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–µ:</strong> –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ —Ü–≤–µ—Ç–∞ (¬±180¬∞)</p>
        <p><strong>–¢—Ä–∏–∞–¥–Ω—ã–µ:</strong> –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ (¬±120¬∞)</p>
        <p><strong>–¢–µ—Ç—Ä–∞–¥–Ω—ã–µ:</strong> –ß–µ—Ç—ã—Ä–µ —Ü–≤–µ—Ç–∞ –∏–∑ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ (0¬∞, 60¬∞, 180¬∞, 240¬∞)</p>
        <p><strong>–ú–æ–Ω–æ—Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ:</strong> –†–∞–∑–ª–∏—á–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞</p>

        <div class="math-formula">
          HSL –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:<br>
          H = (H‚ÇÄ + —Å–º–µ—â–µ–Ω–∏–µ) % 360<br>
          S = –º–µ–∂–¥—É 30% –∏ 100%<br>
          L = –º–µ–∂–¥—É 20% –∏ 80%
        </div>
      </div>
    </div>

    <div class="palette-display">
      <h2 class="section-title">–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞</h2>
      <div class="palette-colors" id="palette-container">
        <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
      </div>
    </div>
  </div>

  <div class="preview-section">
    <h2 class="section-title">–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h2>
    <div class="preview-content">
      <div class="preview-card">
        <h3 class="preview-title">–ö–Ω–æ–ø–∫–∏</h3>
        <button class="button-preview" id="btn1">–û—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞</button>
        <button class="button-preview" id="btn2">–í—Ç–æ—Ä–∏—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞</button>
      </div>
      <div class="preview-card">
        <h3 class="preview-title">–¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫</h3>
        <p class="text-preview" id="text-preview">
          –≠—Ç–æ –ø—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–≤–µ—Ç–æ–≤–æ–π –ø–∞–ª–∏—Ç—Ä—ã.
          –¶–≤–µ—Ç–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞.
        </p>
      </div>
    </div>
  </div>

  <div class="export-section">
    <h2 class="section-title">–≠–∫—Å–ø–æ—Ä—Ç –ø–∞–ª–∏—Ç—Ä—ã</h2>
    <div class="export-options">
      <button class="export-btn" data-format="css">–≠–∫—Å–ø–æ—Ä—Ç –≤ CSS</button>
      <button class="export-btn" data-format="scss">–≠–∫—Å–ø–æ—Ä—Ç –≤ SCSS</button>
      <button class="export-btn" data-format="json">–≠–∫—Å–ø–æ—Ä—Ç –≤ JSON</button>
    </div>
    <textarea id="export-code" readonly placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –∫–æ–¥ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞..."></textarea>
  </div>

  <div class="save-section">
    <button class="save-btn" id="save-palette">
      üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞–ª–∏—Ç—Ä—É –≤ —Ñ–∞–π–ª
    </button>
  </div>
</div>

<div class="notification" id="notification">
  –ü–∞–ª–∏—Ç—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª!
</div>

<script>
  // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  let currentPalette = [];
  const baseColorInput = document.getElementById('base-color');
  const colorValue = document.getElementById('color-value');
  const generateBtn = document.getElementById('generate');
  const paletteContainer = document.getElementById('palette-container');
  const algorithmSelector = document.getElementById('algorithm');
  const exportCode = document.getElementById('export-code');
  const notification = document.getElementById('notification');

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  document.addEventListener('DOMContentLoaded', function() {
    updateColorValue();
    generatePalette();
    setupEventListeners();
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Ü–≤–µ—Ç–∞
  function updateColorValue() {
    colorValue.textContent = baseColorInput.value;
  }

  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
  function setupEventListeners() {
    baseColorInput.addEventListener('input', function() {
      updateColorValue();
      generatePalette();
    });

    generateBtn.addEventListener('click', generatePalette);

    algorithmSelector.addEventListener('change', generatePalette);

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
    document.querySelectorAll('.export-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const format = this.dataset.format;
        exportPalette(format);
      });
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    document.getElementById('save-palette').addEventListener('click', savePaletteToFile);
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤–æ–π –ø–∞–ª–∏—Ç—Ä—ã
  function generatePalette() {
    const baseColor = baseColorInput.value;
    const algorithm = algorithmSelector.value;

    // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ HEX –≤ HSL
    const hsl = hexToHsl(baseColor);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞–ª–∏—Ç—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–∞
    switch(algorithm) {
      case 'analogous':
        currentPalette = generateAnalogous(hsl);
        break;
      case 'complementary':
        currentPalette = generateComplementary(hsl);
        break;
      case 'triadic':
        currentPalette = generateTriadic(hsl);
        break;
      case 'tetradic':
        currentPalette = generateTetradic(hsl);
        break;
      case 'monochromatic':
        currentPalette = generateMonochromatic(hsl);
        break;
      default:
        currentPalette = generateAnalogous(hsl);
    }

    displayPalette();
    updatePreview();
  }

  // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ HEX –≤ HSL
  function hexToHsl(hex) {
    // –£–¥–∞–ª–µ–Ω–∏–µ #
    hex = hex.replace('#', '');

    // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ RGB
    const r = parseInt(hex.substring(0, 2), 16) / 255;
    const g = parseInt(hex.substring(2, 4), 16) / 255;
    const b = parseInt(hex.substring(4, 6), 16) / 255;

    // –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –º–∏–Ω–∏–º—É–º–∞ –∏ –º–∞–∫—Å–∏–º—É–º–∞
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);

    let h, s, l = (max + min) / 2;

    if (max === min) {
      h = s = 0; // achromatic
    } else {
      const d = max - min;
      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

      switch (max) {
        case r: h = (g - b) / d + (g < b ? 6 : 0); break;
        case g: h = (b - r) / d + 2; break;
        case b: h = (r - g) / d + 4; break;
      }

      h /= 6;
    }

    return {
      h: Math.round(h * 360),
      s: Math.round(s * 100),
      l: Math.round(l * 100)
    };
  }

  // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ HSL –≤ HEX
  function hslToHex(h, s, l) {
    h /= 360;
    s /= 100;
    l /= 100;

    let r, g, b;

    if (s === 0) {
      r = g = b = l; // achromatic
    } else {
      const hue2rgb = (p, q, t) => {
        if (t < 0) t += 1;
        if (t > 1) t -= 1;
        if (t < 1/6) return p + (q - p) * 6 * t;
        if (t < 1/2) return q;
        if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
        return p;
      };

      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      const p = 2 * l - q;

      r = hue2rgb(p, q, h + 1/3);
      g = hue2rgb(p, q, h);
      b = hue2rgb(p, q, h - 1/3);
    }

    const toHex = x => {
      const hex = Math.round(x * 255).toString(16);
      return hex.length === 1 ? '0' + hex : hex;
    };

    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Ü–≤–µ—Ç–æ–≤
  function generateAnalogous(hsl) {
    const colors = [];
    const angles = [0, 25, -25, 45, -45];

    for (let i = 0; i < 5; i++) {
      const newH = (hsl.h + angles[i] + 360) % 360;
      const newS = Math.max(30, Math.min(100, hsl.s + (Math.random() * 20 - 10)));
      const newL = Math.max(20, Math.min(80, hsl.l + (Math.random() * 20 - 10)));
      colors.push({
        h: newH,
        s: newS,
        l: newL,
        hex: hslToHex(newH, newS, newL)
      });
    }

    return colors;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤
  function generateComplementary(hsl) {
    const colors = [];

    // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
    colors.push({
      h: hsl.h,
      s: hsl.s,
      l: hsl.l,
      hex: hslToHex(hsl.h, hsl.s, hsl.l)
    });

    // –ö–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π —Ü–≤–µ—Ç
    const compH = (hsl.h + 180) % 360;
    colors.push({
      h: compH,
      s: hsl.s,
      l: hsl.l,
      hex: hslToHex(compH, hsl.s, hsl.l)
    });

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏
    for (let i = 0; i < 3; i++) {
      const angle = i === 0 ? 30 : (i === 1 ? -30 : 150);
      const newH = (hsl.h + angle + 360) % 360;
      const newS = Math.max(30, Math.min(100, hsl.s + (Math.random() * 20 - 10)));
      const newL = Math.max(20, Math.min(80, hsl.l + (Math.random() * 20 - 10)));
      colors.push({
        h: newH,
        s: newS,
        l: newL,
        hex: hslToHex(newH, newS, newL)
      });
    }

    return colors;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∏–∞–¥–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤
  function generateTriadic(hsl) {
    const colors = [];
    const angles = [0, 120, 240];

    for (let i = 0; i < 3; i++) {
      const newH = (hsl.h + angles[i]) % 360;
      const newS = Math.max(40, Math.min(100, hsl.s + (Math.random() * 20 - 10)));
      const newL = Math.max(30, Math.min(70, hsl.l + (Math.random() * 20 - 10)));
      colors.push({
        h: newH,
        s: newS,
        l: newL,
        hex: hslToHex(newH, newS, newL)
      });
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Ç–µ–Ω–∫–∏
    for (let i = 0; i < 2; i++) {
      const baseColor = colors[i];
      const shadeH = baseColor.h;
      const shadeS = Math.max(20, Math.min(100, baseColor.s + (Math.random() * 30 - 15)));
      const shadeL = Math.max(10, Math.min(90, baseColor.l + (Math.random() * 30 - 15)));
      colors.push({
        h: shadeH,
        s: shadeS,
        l: shadeL,
        hex: hslToHex(shadeH, shadeS, shadeL)
      });
    }

    return colors;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Ç—Ä–∞–¥–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤
  function generateTetradic(hsl) {
    const colors = [];
    const angles = [0, 60, 180, 240];

    for (let i = 0; i < 4; i++) {
      const newH = (hsl.h + angles[i] + 360) % 360;
      const newS = Math.max(40, Math.min(100, hsl.s + (Math.random() * 15 - 7.5)));
      const newL = Math.max(30, Math.min(70, hsl.l + (Math.random() * 15 - 7.5)));
      colors.push({
        h: newH,
        s: newS,
        l: newL,
        hex: hslToHex(newH, newS, newL)
      });
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–¥–∏–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫
    const extraH = (hsl.h + 90) % 360;
    const extraS = Math.max(30, Math.min(100, hsl.s + (Math.random() * 20 - 10)));
    const extraL = Math.max(20, Math.min(80, hsl.l + (Math.random() * 20 - 10)));
    colors.push({
      h: extraH,
      s: extraS,
      l: extraL,
      hex: hslToHex(extraH, extraS, extraL)
    });

    return colors;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–Ω–æ—Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–≤–µ—Ç–æ–≤
  function generateMonochromatic(hsl) {
    const colors = [];

    // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
    colors.push({
      h: hsl.h,
      s: hsl.s,
      l: hsl.l,
      hex: hslToHex(hsl.h, hsl.s, hsl.l)
    });

    // –†–∞–∑–ª–∏—á–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏
    const lightnessValues = [15, 30, 45, 65, 80];
    const saturationValues = [hsl.s, hsl.s*0.8, hsl.s*1.2, hsl.s*0.9, hsl.s*1.1];

    for (let i = 0; i < 4; i++) {
      const newS = Math.max(20, Math.min(100, saturationValues[i]));
      const newL = lightnessValues[i];
      colors.push({
        h: hsl.h,
        s: newS,
        l: newL,
        hex: hslToHex(hsl.h, newS, newL)
      });
    }

    return colors;
  }

  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∞–ª–∏—Ç—Ä—ã
  function displayPalette() {
    paletteContainer.innerHTML = '';

    currentPalette.forEach((color, index) => {
      const colorItem = document.createElement('div');
      colorItem.className = 'color-item';
      colorItem.style.backgroundColor = color.hex;
      colorItem.innerHTML = `
                    <div class="color-hex">${color.hex}</div>
                `;

      colorItem.addEventListener('click', () => {
        copyToClipboard(color.hex);
        showNotification(`–¶–≤–µ—Ç ${color.hex} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!`);
      });

      paletteContainer.appendChild(colorItem);
    });
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é
  function updatePreview() {
    if (currentPalette.length < 2) return;

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
    const btn1 = document.getElementById('btn1');
    const btn2 = document.getElementById('btn2');

    if (btn1 && btn2) {
      btn1.style.backgroundColor = currentPalette[0].hex;
      btn1.style.color = getContrastColor(currentPalette[0].hex);

      btn2.style.backgroundColor = 'transparent';
      btn2.style.color = currentPalette[0].hex;
      btn2.style.border = `2px solid ${currentPalette[0].hex}`;
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
    const textPreview = document.getElementById('text-preview');
    if (textPreview) {
      textPreview.style.color = currentPalette[0].hex;
    }
  }

  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
  function getContrastColor(hex) {
    // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ HEX –≤ RGB
    const r = parseInt(hex.substr(1, 2), 16);
    const g = parseInt(hex.substr(3, 2), 16);
    const b = parseInt(hex.substr(5, 2), 16);

    // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏
    const brightness = (r * 299 + g * 587 + b * 114) / 1000;

    return brightness > 128 ? '#000000' : '#ffffff';
  }

  // –≠–∫—Å–ø–æ—Ä—Ç –ø–∞–ª–∏—Ç—Ä—ã
  function exportPalette(format) {
    if (currentPalette.length === 0) return;

    let exportText = '';

    switch(format) {
      case 'css':
        exportText = generateCSS();
        break;
      case 'scss':
        exportText = generateSCSS();
        break;
      case 'json':
        exportText = generateJSON();
        break;
    }

    exportCode.value = exportText;
    showNotification(`–ü–∞–ª–∏—Ç—Ä–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ ${format.toUpperCase()}!`);
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSS
  function generateCSS() {
    let css = '/* –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ */\n';
    css += ':root {\n';

    currentPalette.forEach((color, index) => {
      css += `  --color-${index + 1}: ${color.hex}; /* HSL(${color.h}, ${color.s}%, ${color.l}%) */\n`;
    });

    css += '}\n\n';
    css += '/* –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:\n';
    css += '   .my-button { background-color: var(--color-1); }\n';
    css += '   .my-text { color: var(--color-2); }\n';
    css += '*/';

    return css;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SCSS
  function generateSCSS() {
    let scss = '// –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞\n';

    currentPalette.forEach((color, index) => {
      scss += `$color-${index + 1}: ${color.hex}; // HSL(${color.h}, ${color.s}%, ${color.l}%)\n`;
    });

    scss += '\n// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:\n';
    scss += '// .my-button { background-color: $color-1; }\n';
    scss += '// .my-text { color: $color-2; }';

    return scss;
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON
  function generateJSON() {
    const paletteData = {
      colors: currentPalette.map(color => ({
        hex: color.hex,
        hsl: {
          h: color.h,
          s: color.s,
          l: color.l
        }
      })),
      generated: new Date().toISOString(),
      algorithm: algorithmSelector.value
    };

    return JSON.stringify(paletteData, null, 2);
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞–ª–∏—Ç—Ä—ã –≤ —Ñ–∞–π–ª
  function savePaletteToFile() {
    if (currentPalette.length === 0) {
      showNotification('–ù–µ—Ç –ø–∞–ª–∏—Ç—Ä—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!');
      return;
    }

    // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞
    const baseColorHex = baseColorInput.value.replace('#', '');
    const fileName = `palette_${baseColorHex}.txt`;

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
    const fileContent = generateFileContent();

    // –°–æ–∑–¥–∞–µ–º –∏ —Å–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
    downloadFile(fileContent, fileName);

    showNotification(`–ü–∞–ª–∏—Ç—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª ${fileName}!`);
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞
  function generateFileContent() {
    let content = `–¶–í–ï–¢–û–í–ê–Ø –ü–ê–õ–ò–¢–†–ê\n`;
    content += `================\n\n`;

    content += `–ë–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç: ${baseColorInput.value}\n`;
    content += `–ê–ª–≥–æ—Ä–∏—Ç–º: ${getAlgorithmName(algorithmSelector.value)}\n`;
    content += `–î–∞—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${new Date().toLocaleString('ru-RU')}\n\n`;

    content += `–¶–í–ï–¢–ê –ü–ê–õ–ò–¢–†–´:\n`;
    content += `--------------\n`;
    currentPalette.forEach((color, index) => {
      content += `${index + 1}. ${color.hex} - HSL(${color.h}, ${color.s}%, ${color.l}%)\n`;
    });

    content += `\n\nCSS –ü–ï–†–ï–ú–ï–ù–ù–´–ï:\n`;
    content += `---------------\n`;
    currentPalette.forEach((color, index) => {
      content += `--color-${index + 1}: ${color.hex};\n`;
    });

    content += `\n\n–ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø CSS:\n`;
    content += `------------------------\n`;
    content += `.my-button { background-color: var(--color-1); }\n`;
    content += `.my-text { color: var(--color-2); }\n`;
    content += `.my-border { border: 2px solid var(--color-3); }\n`;

    content += `\n\n–ú–ê–¢–ï–ú–ê–¢–ò–ß–ï–°–ö–ò–ï –†–ê–°–ß–ï–¢–´:\n`;
    content += `--------------------\n`;
    content += `–ê–ª–≥–æ—Ä–∏—Ç–º: ${algorithmSelector.value}\n`;
    content += `–§–æ—Ä–º—É–ª–∞ –¥–ª—è HSL:\n`;
    content += `H = (H‚ÇÄ + —Å–º–µ—â–µ–Ω–∏–µ) % 360\n`;
    content += `S = –º–µ–∂–¥—É 30% –∏ 100%\n`;
    content += `L = –º–µ–∂–¥—É 20% –∏ 80%\n`;

    return content;
  }

  // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
  function getAlgorithmName(algorithm) {
    const names = {
      'analogous': '–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ —Ü–≤–µ—Ç–∞',
      'complementary': '–ö–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–µ —Ü–≤–µ—Ç–∞',
      'triadic': '–¢—Ä–∏–∞–¥–Ω—ã–µ —Ü–≤–µ—Ç–∞',
      'tetradic': '–¢–µ—Ç—Ä–∞–¥–Ω—ã–µ —Ü–≤–µ—Ç–∞',
      'monochromatic': '–ú–æ–Ω–æ—Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞'
    };
    return names[algorithm] || algorithm;
  }

  // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
  function downloadFile(content, filename) {
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);

    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();

    // –û—á–∏—â–∞–µ–º –ø–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    setTimeout(() => {
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }, 100);
  }

  // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).catch(err => {
      console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
    });
  }

  // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  function showNotification(message) {
    notification.textContent = message;
    notification.classList.add('show');

    setTimeout(() => {
      notification.classList.remove('show');
    }, 3000);
  }
</script>
<footer>
  <p>–°–æ–∑–¥–∞–Ω–æ @Verieth</p>
</footer>
</body>
</html>